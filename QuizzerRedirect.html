<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Link Redirector</title>
<script>
document.addEventListener("DOMContentLoaded", function() {
    // Your 10 example links
    const links = [
        "https://quizzly.ai/play/interstate-highways",
        "https://quizzly.ai/play/manila-traffic",
        "https://quizzly.ai/play/pakistan-road-projects",
        "https://quizzly.ai/play/zamboanga-traffic-incidents",
        "https://quizzly.ai/play/short-lived-obstruction",
        "https://quizzly.ai/play/scenic-route",
        "https://quizzly.ai/play/vehicle-accident",
        "https://quizzly.ai/play/hyderabad-to-bangalore-road-trip",
        "https://quizzly.ai/play/automobile-accident",
        "https://quizzly.ai/play/introduction-to-off-road-driving",
        "https://quizzly.ai/play/chennai-coastal-road",
        "https://quizzly.ai/play/philippine-highway-code",
        "https://quizzly.ai/play/sheikh-zayed-road",
        "https://quizzly.ai/play/traffic-congestion-on-hyderabad-to-bangalore-road",
        "https://quizzly.ai/play/cr-v",
        "https://quizzly.ai/play/understanding-vehicle-dynamics",
        "https://quizzly.ai/play/philippine-traffic-laws",
        "https://quizzly.ai/play/toyota-tacoma",
        "https://quizzly.ai/play/dotr-guidelines",
        "https://quizzly.ai/play/bangkok-train-routes",
        "https://quizzly.ai/play/fast-cars",
        "https://quizzly.ai/play/vehicle-registration-requirements",
        "https://quizzly.ai/play/bangkok-sightseeing"
    ];

    function getCurrentWeek() {
        let now = new Date();
        let startOfYear = new Date(now.getFullYear(), 0, 1);
        let days = Math.floor((now - startOfYear) / (24 * 60 * 60 * 1000));
        return Math.ceil((days + startOfYear.getDay() + 1) / 7);
    }

    let currentWeek = getCurrentWeek();
    let storedWeek = localStorage.getItem("visitedWeek");

    // Reset if it's a new week
    if (storedWeek !== String(currentWeek)) {
        localStorage.setItem("visitedWeek", String(currentWeek));
        localStorage.setItem("visitedLinks", JSON.stringify([]));
    }
    
    // Load visited links from localStorage or create empty array
    let visited = JSON.parse(localStorage.getItem("visitedLinks") || "[]");

    // Find remaining links
    let remaining = links.filter(link => !visited.includes(link));

    if (remaining.length === 0) {
        //localStorage.removeItem("visitedLinks");
        alert("All links visited! Will restart next week");
        //remaining = [...links];
        return;
    }

    // Pick a random remaining link
    let chosen = remaining[Math.floor(Math.random() * remaining.length)];

    // Save visit
    visited.push(chosen);
    localStorage.setItem("visitedLinks", JSON.stringify(visited));

    // Redirect
    window.location.assign(chosen);

});
</script>
</head>
<body>
<p>Redirecting...</p>
</body>
</html>
